(async()=>{var t=await import(window.theme.modules.baseComponent);customElements.define("product-variant-swatch",class extends t.default{elements={productJSON:"[data-product-json]",value:"[data-swatch-value]",group:"[data-swatch-group]"};render(){this.isProductPage="product"===this.getAttribute("page-type"),this.productData=JSON.parse(this.$productJSON.textContent),this._getDefaultVariant(),this.options=[].concat(this.variant.options),this.$group.addEventListener("change",this._variantChangeHandler.bind(this))}_getDefaultVariant(){this.variant=this.productData.variants.find(t=>t.id===+this.getAttribute("current-variant"))}_variantChangeHandler(t){this._updateUi(t),this._updateOptions(t.target),this._findVariantByOptions(),this._updateURL(),this.forwardEvent("variantChange",this.variant)}_updateUi(t){this.$value.textContent=t.target.value}_updateOptions(t){this.options[this.getAttribute("option-position")-1]=t.value}_findVariantByOptions(){this.variant=this.productData.variants.find(t=>t.options.every((t,a)=>t===this.options[a]))}_updateURL(){this.isProductPage&&this._updateUrlParam()}_updateUrlParam(){this.variant?.id?this._handleUrlParams("has")?this._handleUrlParams("set",this.variant.id):this._handleUrlParams("append",this.variant.id):this._handleUrlParams("delete")}_handleUrlParams=(t,a)=>{let i=new URL(window.location.href);if("has"===t)return i.searchParams[t]("variant");i.searchParams[t]("variant",a),window.history.pushState("","",i.toString())}})})();