(async()=>{const{updateURLParams:r,historyPush:s}=await import(window.theme.modules.utils);var e=await import(window.theme.modules.baseComponent);customElements.define("collection-filters-form",class extends e.default{elements={form:"form"};render(){this.listenTo("filterChange",(e,t)=>{"filters"!==t.src&&this._renderFilters(t.html)}),this.$form.addEventListener("change",this._onSubmitHandler.bind(this))}_onSubmitHandler(e){e.preventDefault(),this.trigger("filterUpadting");var{queryURL:t,currentURL:e}=r(new FormData(this.$form),this.sectionId);this._fetchChanges(t),s(e)}_fetchChanges(e){fetch(e).then(e=>e.text()).then(e=>{this._renderFilters(e),this.forwardEvent("filterChange",{html:e,src:"filters"})})}_renderFilters(e){const r=(new DOMParser).parseFromString(e,"text/html");Array.from(this.querySelectorAll("[data-contents]")).map(e=>{var t=r.querySelector(`[data-contents="${e.dataset.contents}"]`);e.replaceWith(t)})}})})();