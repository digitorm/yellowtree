(async()=>{var e=await import(window.theme.modules.baseComponent);const{debounce:t,parseHTML:i}=await import(window.theme.modules.utils);customElements.define("search-popup",class extends e.default{elements={input:"[data-input]",results:"[data-results]"};render(){this.$input.focus(),this.$input.addEventListener("input",t(this._inputHandler.bind(this),300).bind(this))}_inputHandler(e){this.searchQuery=this.$input.value.trim(),this._getSearchResults()}_getSearchResults(){const e=`q=${window.encodeURIComponent(this.searchQuery)}`,t=`${window.encodeURIComponent("resources[type]")}=product`,s=`${window.encodeURIComponent("resources[limit]")}=4`;fetch(`${window.theme.routes.predictiveSearch}?${[e,t,s,"section_id=predictive-search"].join("&")}`).then(e=>e.ok?e.text():void console.error(e.status)).then(e=>{e=i(e).querySelector("#shopify-section-predictive-search");console.log(e),e?this.$results.replaceChildren(e):this.$results.replaceChildren()})}})})();