class BaseElement extends HTMLElement{constructor(){super(),"function"==typeof this.onClick&&this.addEventListener("click",this.onClick),this.sectionId=this.getAttribute("section-id"),this.__init=!1}listenTo(t,e,i=!0){document.addEventListener(t,t=>{(t.detail?.sectionId===this.sectionId&&i||!i)&&e.bind(this)(t,t.detail)})}forwardEvent(t,e={}){e=new CustomEvent(t,{bubbles:!0,composed:!0,detail:{sectionId:this.sectionId,...e}});this.dispatchEvent(e)}connectedCallback(){if(!this.__init){if(this.on=this.listenTo,this.trigger=this.forwardEvent,"function"==typeof this.onIntersect&&(this.observer=new IntersectionObserver(t=>{this.onIntersect(t[0].isIntersecting)}),this.observer.observe(this)),this.elements)for(var[t,e]of Object.entries(this.elements))this[`$${t}`]="*"===e[0]?Array.from(this.querySelectorAll(e.substring(1))):this.querySelector(e);"function"==typeof this.render&&this.render(),this.__init=!0}"function"==typeof this.reRender&&this.reRender()}updateHTML(t){var e=this.hasAttribute("id")?this.getAttribute("id"):null,t=e?t.getElementById(e):t.querySelector(this.tagName);t&&this.replaceChildren(...t.childNodes)}getParentSection(){return document.getElementById(`shopify-section-${this.sectionId}`)}}export default BaseElement;