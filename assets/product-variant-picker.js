(async()=>{var t=await import(window.theme.modules.baseComponent);customElements.define("product-variant-picker",class extends t.default{elements={select:"[data-select]",productJSON:"[data-product-json]"};render(){this.isProductPage="product"===this.getAttribute("page-type"),this.productData=JSON.parse(this.$productJSON.textContent),this.addEventListener("change",a=>{this.variant=this.productData.variants.find(t=>t.id===+a.target.value),this._updateURL(),this.variant&&this._fetch(),this.forwardEvent("variantChange",this.variant)})}_updateURL(){this.isProductPage&&this._updateUrlParam()}_updateUrlParam(){this.variant?.id?this._handleUrlParams("has")?this._handleUrlParams("set",this.variant.id):this._handleUrlParams("append",this.variant.id):this._handleUrlParams("delete")}_handleUrlParams=(t,a)=>{let e=new URL(window.location.href);if("has"===t)return e.searchParams[t]("variant");e.searchParams[t]("variant",a),window.history.pushState("","",e.toString())};_fetch(){this.forwardEvent("variantLoading"),fetch(`${this.getAttribute("url")}?variant=${this.variant.id}&section_id=${this.getAttribute("section-id")}`).then(t=>t.text()).then(t=>{this.html=(new DOMParser).parseFromString(t,"text/html"),this.forwardEvent("variantChangeHtml",{html:this.html})})}})})();