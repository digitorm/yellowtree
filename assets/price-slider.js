(async()=>{const{loadScript:t,loadStyle:e,updateURLParams:i,historyPush:s}=await import(window.theme.modules.utils);var r=await import(window.theme.modules.baseComponent);customElements.define("price-slider",class extends r.default{elements={slider:"[data-slider]",min:"[data-min]",max:"[data-max]",inputMin:"[data-input-min]",inputMax:"[data-input-max]"};async render(){await this._initSlider(),this.slider.on("change",([t,e])=>{var{queryURL:t,currentURL:e}=i({"filter.v.price.gte":Math.round(t),"filter.v.price.lte":Math.round(e)},this.sectionId);this.trigger("filterUpadting"),this._fetchChanges(t),s(e)}),this.slider.on("set",([t,e])=>{this.$inputMin.value=Math.round(t),this.$inputMax.value=Math.round(e)}),this.on("resetPriceFilter",this._reset.bind(this))}async _initSlider(){e("https://cdn.jsdelivr.net/npm/nouislider@15.4.0/dist/nouislider.min.css"),window.noUiSlider||await t("https://cdn.jsdelivr.net/npm/nouislider@15.4.0/dist/nouislider.min.js"),this.slider=window.noUiSlider.create(this.$slider,{start:[+this.getAttribute("current-min"),+this.getAttribute("current-max")],connect:!0,range:{min:+this.getAttribute("min"),max:+this.getAttribute("max")}})}_fetchChanges(t){fetch(t).then(t=>t.text()).then(t=>{this._updatePrices(t),this.forwardEvent("filterChange",{html:t,src:"price"})})}_updatePrices(t){const e=(new DOMParser).parseFromString(t,"text/html");var i=e.querySelector(this.elements.min),t=e.querySelector(this.elements.max);this.$min.replaceChildren(...i.childNodes),this.$max.replaceChildren(...t.childNodes)}_reset(){this.slider.set([+this.getAttribute("min"),+this.getAttribute("max")]),this._setDefault(this.$min),this._setDefault(this.$max)}_setDefault(t){t.innerText=t.dataset.defaultValue}})})();